<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="Array.html">Array</a></li></li><li><li><a href="AssocList.html">AssocList</a></li></li><li><li><a href="Blob.html">Blob</a></li></li><li><li><a href="Bool.html">Bool</a></li></li><li><li><a href="Buffer.html">Buffer</a></li></li><li><li><a href="Char.html">Char</a></li></li><li><li><a href="Debug.html">Debug</a></li></li><li><li><a href="Deque.html">Deque</a></li></li><li><li><a href="Error.html">Error</a></li></li><li><li><a href="Float.html">Float</a></li></li><li><li><a href="Func.html">Func</a></li></li><li><li><a href="Hash.html">Hash</a></li></li><li><li><a href="HashMap.html">HashMap</a></li></li><li><li><a href="Heap.html">Heap</a></li></li><li><li><a href="Int.html">Int</a></li></li><li><li><a href="Int16.html">Int16</a></li></li><li><li><a href="Int32.html">Int32</a></li></li><li><li><a href="Int64.html">Int64</a></li></li><li><li><a href="Int8.html">Int8</a></li></li><li><li><a href="Iter.html">Iter</a></li></li><li><li><a href="IterType.html">IterType</a></li></li><li><li><a href="List.html">List</a></li></li><li><li><a href="Nat.html">Nat</a></li></li><li><li><a href="Nat16.html">Nat16</a></li></li><li><li><a href="Nat32.html">Nat32</a></li></li><li><li><a href="Nat64.html">Nat64</a></li></li><li><li><a href="Nat8.html">Nat8</a></li></li><li><li><a href="None.html">None</a></li></li><li><li><a href="Option.html">Option</a></li></li><li><li><a href="Order.html">Order</a></li></li><li><li><a href="Prelude.html">Prelude</a></li></li><li><li><a href="Principal.html">Principal</a></li></li><li><li><a href="RBTree.html">RBTree</a></li></li><li><li><a href="Random.html">Random</a></li></li><li><li><a href="Result.html">Result</a></li></li><li><li><a href="Stack.html">Stack</a></li></li><li><li><a href="Text.html">Text</a></li></li><li><li><a href="Time.html">Time</a></li></li><li><li><a href="Trie.html">Trie</a></li></li><li><li><a href="TrieMap.html">TrieMap</a></li></li><li><li><a href="TrieSet.html">TrieSet</a></li></li><li><li><a href="Word16.html">Word16</a></li></li><li><li><a href="Word32.html">Word32</a></li></li><li><li><a href="Word64.html">Word64</a></li></li><li><li><a href="Word8.html">Word8</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.TrieMap">TrieMap</a></li></li><li><li><a href="#clone">clone</a></li></li><li><li><a href="#fromEntries">fromEntries</a></li></li><li><li><a href="#map">map</a></li></li><li><li><a href="#mapFilter">mapFilter</a></li></li></ul></nav><div class="documentation"><h1>TrieMap</h1><p>Functional map</p>
<p>This module defines an imperative hash map, with a general key and value type.  It matches the interface and semantics of HashMap.  Unlike HashMap, its internal representation uses a functional hash trie (see <code>trie.mo</code>).</p>
<p>This class permits us to compare the performance of two representations of hash-based maps, where tries (as binary trees) permit more efficient, constant-time, cloning compared with ordinary tables.  This property is nice for supporting transactional workflows where map mutations may be provisional, and where we may expect some mutations to be uncommitted, or to &quot;roll back&quot;.</p>
<p>For now, this class does not permit a direct <code>clone</code> operation (neither does <code>HashMap</code>), but it does permit creating iterators via <code>iter()</code>.  The effect is similar: Each iterator costs <code>O(1)</code> to create, but represents a fixed view of the mapping that does not interfere with mutations (it will <em>not</em> view subsequent insertions or mutations, if any).</p>
<div class="declaration"><h4 class="class-declaration" id="type.TrieMap"><span class="keyword">class </span><span class="classname">TrieMap</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">isEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <span class="parameter">hashOf</span> : <span class="type">K</span> -&gt; <a href="Hash.html#type.Hash"><span class="type">Hash.Hash</span></a>)</h4><div class="declaration"><h4 class="function" id="TrieMap.size"><code><span class="keyword">public func </span><span class="fnname">size</span>() : <span class="type">Nat</span></code></h4><p><p>Returns the number of entries in the map.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.put"><code><span class="keyword">public func </span><span class="fnname">put</span>(<span class="parameter">k</span> : <span class="type">K</span>, <span class="parameter">v</span> : <span class="type">V</span>)</code></h4><p><p>Associate a key and value, overwriting any prior association for the key.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.replace"><code><span class="keyword">public func </span><span class="fnname">replace</span>(<span class="parameter">k</span> : <span class="type">K</span>, <span class="parameter">v</span> : <span class="type">V</span>) : ?<span class="type">V</span></code></h4><p><p><a href="#value.put"><code>Put</code></a> the key and value, <em>and</em> return the (optional) prior value for the key.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.get"><code><span class="keyword">public func </span><span class="fnname">get</span>(<span class="parameter">k</span> : <span class="type">K</span>) : ?<span class="type">V</span></code></h4><p><p>Get the (optional) value associated with the given key.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.delete"><code><span class="keyword">public func </span><span class="fnname">delete</span>(<span class="parameter">k</span> : <span class="type">K</span>)</code></h4><p><p>Delete the (optional) value associated with the given key.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.remove"><code><span class="keyword">public func </span><span class="fnname">remove</span>(<span class="parameter">k</span> : <span class="type">K</span>) : ?<span class="type">V</span></code></h4><p><p><a href="#value.delete"><code>Delete</code></a> and return the (optional) value associated with the given key.</p>
</p></div><div class="declaration"><h4 class="function" id="TrieMap.entries"><code><span class="keyword">public func </span><span class="fnname">entries</span>() : <a href="Iter.html#type.Iter"><span class="type">I.Iter</span></a>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;</code></h4><p><p>Returns an <a href="Iter.html#type.Iter"><code>Iter</code></a> over the entries.</p>
<p>Each iterator gets a <em>persistent view</em> of the mapping, independent of concurrent updates to the iterated map.</p>
</p></div><p></p></div><div class="declaration"><h4 class="function" id="clone"><code><span class="keyword">public func </span><span class="fnname">clone</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <a href="Hash.html#type.Hash"><span class="type">Hash.Hash</span></a><br/>) : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Clone the map, given its key operations.</p>
</p></div><div class="declaration"><h4 class="function" id="fromEntries"><code><span class="keyword">public func </span><span class="fnname">fromEntries</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">entries</span> : <a href="Iter.html#type.Iter"><span class="type">I.Iter</span></a>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <a href="Hash.html#type.Hash"><span class="type">Hash.Hash</span></a><br/>) : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Clone an iterator of key-value pairs.</p>
</p></div><div class="declaration"><h4 class="function" id="map"><code><span class="keyword">public func </span><span class="fnname">map</span>&lt;<span class="type">K</span>, <span class="type">V1</span>, <span class="type">V2</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V1</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <a href="Hash.html#type.Hash"><span class="type">Hash.Hash</span></a>, <br/>  <span class="parameter">mapFn</span> : (<span class="type">K</span>, <span class="type">V1</span>) -&gt; <span class="type">V2</span><br/>) : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V2</span>&gt;</code></h4><p><p>Transform (map) the values of a map, retaining its keys.</p>
</p></div><div class="declaration"><h4 class="function" id="mapFilter"><code><span class="keyword">public func </span><span class="fnname">mapFilter</span>&lt;<span class="type">K</span>, <span class="type">V1</span>, <span class="type">V2</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V1</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <a href="Hash.html#type.Hash"><span class="type">Hash.Hash</span></a>, <br/>  <span class="parameter">mapFn</span> : (<span class="type">K</span>, <span class="type">V1</span>) -&gt; ?<span class="type">V2</span><br/>) : <a href="#type.TrieMap"><span class="type">TrieMap</span></a>&lt;<span class="type">K</span>, <span class="type">V2</span>&gt;</code></h4><p><p>Transform and filter the values of a map, retaining its keys.</p>
</p></div></div></body></html>